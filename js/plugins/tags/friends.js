"use strict";var FriendsJS={requestAPI:function(e,r,t){var n=5;!function a(){return new Promise(function(o,i){var s=0,u=setTimeout(function(){0===s&&(s=2,u=null,i("请求超时"),0==n&&t())},5e3);fetch(e).then(function(e){if(2!==s&&(clearTimeout(u),o(e),u=null,s=1),e.ok)return e.json();throw new Error("Network response was not ok.")}).then(function(e){n=0,r(e)})["catch"](function(e){n>0?(n-=1,setTimeout(function(){a()},5e3)):t()})})}()},layout:function(e){var r=e.el;FriendsJS.requestAPI(e.api,function(t){r.querySelector(".loading-wrap").remove();var n=t.content,a="";n.forEach(function(r,t){var n='<div class="user-card">';n+='<a class="card-link" target="_blank" rel="external noopener noreferrer"',n+=' href="'+r.url+'">',n+='<img alt="'+r.title+'" src="'+(r.avatar||e.avatar)+'" onerror="errorImgAvatar(this)">',n+='<div class="name"><span>'+r.title+"</span></div>",n+="</a>",a+=n+="</div>"}),r.querySelector(".group-body").innerHTML=a},function(){try{r.querySelector(".loading-wrap svg").remove(),r.querySelector(".loading-wrap p").innerText("加载失败，请稍后重试。")}catch(e){}})},start:function(){for(var e=document.getElementsByClassName("friendsjs-wrap"),r=0;r<e.length;r++){var t=e[r],n=t.getAttribute("api");if(null!=n){var a=new Object;a.el=t,a.api=n,a["class"]=t.getAttribute("class"),a.avatar=volantis.GLOBAL_CONFIG["default"].avatar,FriendsJS.layout(a)}}}};FriendsJS.start();
//# sourceMappingURL=../../../maps/js/plugins/tags/friends.js.map
