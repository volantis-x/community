{"version":3,"sources":["js/plugins/parallax.js"],"names":["Parallax","options","speed","zIndex","fade","slidein","slider","mirrors","length","opac","parseFloat","style","opacity","setTimeout","mirror","remove","shift","start","document","createElement","classList","add","visibility","position","top","left","overflow","window","appendChild","src","alt","mirrorItem","push","addEventListener","update","init","loadDimensions","wH","documentElement","clientHeight","wW","clientWidth","getScrollTop","scrollPos","pageYOffset","compatMode","scrollTop","body","lastPosition","loop","winScrollTop","yoffset","sT","Math","max","sL","scrollLeft","overScroll","min","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","refreshItem","aspectRatio","naturalWidth","naturalHeight","aspect","boxWidth","boxHeight","boxOffsetTop","boxOffsetLeft","boxOffsetBottom","margin","winHeight","maxOffset","minOffset","imageHeightMin","imageOffsetMin","imageWidth","imageHeight","offsetBaseTop","offsetLeft","renderItem","scrollBottom","mirrorTop","mirrorLeft","offsetTop","transform","height","width","maxWidth","forEach","e"],"mappings":"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","file":"../../../js/plugins/parallax.js","sourcesContent":["let Parallax = {};\nParallax.options = {};\nParallax.options.speed = 0.25;\nParallax.options.zIndex = -100;\nParallax.options.fade = 1500;\nParallax.slidein = () => {\n  let slider = Parallax.mirrors[0].slider;\n  if (Parallax.mirrors.length >= 2) {\n    slider = Parallax.mirrors[1].slider;\n  }\n  var opac = parseFloat(slider.style.opacity);\n  if (opac !== 1) {\n    if (Parallax.mirrors.length >= 2) {\n      opac = opac + 0.1;\n      slider.style.opacity = opac;\n      setTimeout(Parallax.slidein, Parallax.options.fade / 10);\n    }else{\n      slider.style.opacity = 1;\n    }\n  } else {\n    if (Parallax.mirrors.length >= 2) {\n      Parallax.mirrors[0].mirror.remove();\n      Parallax.mirrors.shift();\n    }\n  }\n};\nParallax.start = () => {\n  let mirror = document.createElement(\"div\");\n  mirror.classList.add(\"parallax-mirror\");\n  mirror.style.visibility = \"hidden\";\n  mirror.style.zIndex = Parallax.options.zIndex;\n  mirror.style.position = \"fixed\";\n  mirror.style.top = 0;\n  mirror.style.left = 0;\n  mirror.style.overflow = \"hidden\";\n  Parallax.window.appendChild(mirror);\n  let slider = document.createElement(\"img\");\n  slider.src = Parallax.options.src;\n  slider.alt = \"parallax\";\n  slider.classList.add(\"parallax-slider\");\n  slider.style.opacity = 0;\n  mirror.appendChild(slider);\n  if (!Parallax.mirrors) {\n    Parallax.mirrors = [];\n  }\n  let mirrorItem = {};\n  mirrorItem.mirror = mirror;\n  mirrorItem.slider = slider;\n  Parallax.mirrors.push(mirrorItem);\n  Parallax.slidein();\n  slider.addEventListener(\n    \"load\",\n    function () {\n      Parallax.update();\n    },\n    false\n  );\n};\nParallax.init = () => {\n  function loadDimensions() {\n    Parallax.wH = document.documentElement.clientHeight;\n    Parallax.wW = document.documentElement.clientWidth;\n  }\n  function getScrollTop() {\n    var scrollPos;\n    if (window.pageYOffset) {\n      scrollPos = window.pageYOffset;\n    } else if (document.compatMode && document.compatMode != \"BackCompat\") {\n      scrollPos = document.documentElement.scrollTop;\n    } else if (document.body) {\n      scrollPos = document.body.scrollTop;\n    }\n    return scrollPos;\n  }\n  function loadScrollPosition() {\n    const winScrollTop = getScrollTop();\n    Parallax.sT = Math.max(0, winScrollTop);\n    Parallax.sL = Math.max(0, document.body.scrollLeft);\n    Parallax.overScroll = Math.min(winScrollTop, 0);\n  }\n  window.addEventListener(\n    \"resize\",\n    function () {\n      loadDimensions();\n      Parallax.update();\n    },\n    false\n  );\n  loadDimensions();\n  let lastPosition = -1;\n  (function loop() {\n    const yoffset = getScrollTop();\n    if (lastPosition !== yoffset) {\n      lastPosition = yoffset;\n      loadScrollPosition();\n      Parallax.update();\n    }\n    window.requestAnimationFrame =\n      window.requestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame;\n    window.requestAnimationFrame(loop);\n  })();\n};\n\nParallax.refreshItem = (slider) => {\n  Parallax.options.aspectRatio =\n    slider.naturalWidth / (slider.naturalHeight || 1);\n  const aspect = Parallax.options.aspectRatio || 1;\n  Parallax.options.boxWidth = Parallax.window.clientWidth;\n  Parallax.options.boxHeight = Parallax.window.clientHeight;\n  Parallax.options.boxOffsetTop = Parallax.window.scrollTop;\n  Parallax.options.boxOffsetLeft = Parallax.window.scrollLeft;\n  Parallax.options.boxOffsetBottom =\n    Parallax.options.boxOffsetTop + Parallax.options.boxHeight;\n  const winHeight = Parallax.wH;\n  const maxOffset = Parallax.options.boxOffsetTop;\n  const minOffset = Math.max(\n    Parallax.options.boxOffsetTop + Parallax.options.boxHeight - winHeight,\n    0\n  );\n  const imageHeightMin =\n    (Parallax.options.boxHeight +\n      (maxOffset - minOffset) * (1 - Parallax.options.speed)) |\n    0;\n  const imageOffsetMin =\n    ((Parallax.options.boxOffsetTop - maxOffset) *\n      (1 - Parallax.options.speed)) |\n    0;\n  let margin;\n  if (Parallax.options.boxWidth < imageHeightMin * aspect) {\n    Parallax.options.imageWidth = (imageHeightMin * aspect) | 0;\n    Parallax.options.imageHeight = imageHeightMin;\n    Parallax.options.offsetBaseTop = imageOffsetMin;\n    margin = Parallax.options.imageWidth - Parallax.options.boxWidth;\n    Parallax.options.offsetLeft = (-margin / 2) | 0;\n  } else {\n    Parallax.options.imageWidth = Parallax.options.boxWidth;\n    Parallax.options.imageHeight = (Parallax.options.boxWidth / aspect) | 0;\n    Parallax.options.offsetLeft = 0;\n    margin = Parallax.options.imageHeight - imageHeightMin;\n    Parallax.options.offsetBaseTop = (imageOffsetMin - margin / 2) | 0;\n  }\n};\nParallax.renderItem = (mirror, slider) => {\n  const scrollTop = Parallax.sT;\n  const scrollLeft = Parallax.sL;\n  const scrollBottom = scrollTop + Parallax.wH;\n  if (\n    Parallax.options.boxOffsetBottom > scrollTop &&\n    Parallax.options.boxOffsetTop <= scrollBottom\n  ) {\n    Parallax.options.visibility = \"visible\";\n    Parallax.options.mirrorTop = Parallax.options.boxOffsetTop - scrollTop;\n    Parallax.options.mirrorLeft = Parallax.options.boxOffsetLeft - scrollLeft;\n    Parallax.options.offsetTop =\n      Parallax.options.offsetBaseTop -\n      Parallax.options.mirrorTop * (1 - Parallax.options.speed);\n  } else {\n    Parallax.options.visibility = \"hidden\";\n  }\n  mirror.style.transform =\n    \"translate3d(\" +\n    Parallax.options.mirrorLeft +\n    \"px, \" +\n    Parallax.options.mirrorTop +\n    \"px, 0px)\";\n  mirror.style.visibility = Parallax.options.visibility;\n  mirror.style.height = Parallax.options.boxHeight + \"px\";\n  mirror.style.width = Parallax.options.boxWidth + \"px\";\n\n  slider.style.transform =\n    \"translate3d(\" +\n    Parallax.options.offsetLeft +\n    \"px, \" +\n    Parallax.options.offsetTop +\n    \"px, 0px)\";\n  slider.style.position = \"absolute\";\n  slider.style.height = Parallax.options.imageHeight + \"px\";\n  slider.style.width = Parallax.options.imageWidth + \"px\";\n  slider.style.maxWidth = \"none\";\n};\nParallax.update = () => {\n  if (!Parallax.mirrors) {\n    return\n  }\n  Parallax.mirrors.forEach((e) => {\n    Parallax.refreshItem(e.slider);\n    Parallax.renderItem(e.mirror, e.slider);\n  });\n};\n"]}